#!/bin/bash
sudo apt update
sudo apt-get install libasan5 clang clang-tools zlib1g-dev freetype2-demos gcc automake libtool -y
rm -rf libpng-1.6.37* freetype2-VER-2-10-3* font.ttf
unset LD_PRELOAD LD_LIBRARY_PATH CFLAGS LDFLAGS CC
alias basura="cd ../ && sudo rm -rf libpng-1.6.37 && tar xvzf libpng-1.6.37.tar.gz && cd libpng-1.6.37"
wget https://sourceforge.net/projects/libpng/files/libpng16/1.6.37/libpng-1.6.37.tar.gz/download -O libpng-1.6.37.tar.gz
tar xvzf libpng-1.6.37.tar.gz
wget https://git.savannah.gnu.org/cgit/freetype/freetype2.git/snapshot/freetype2-VER-2-10-3.tar.gz
tar xvzf freetype2-VER-2-10-3.tar.gz
export LD_LIBRARY_PATH=/usr/local/lib/
export CFLAGS="-g -fsanitize=address -lasan" LDFLAGS="-fsanitize=address -lasan" CC=gcc
cd libpng-1.6.37
./configure
sudo make install
cd ../freetype2-VER-2-10-3/
sh autogen.sh
./configure
sudo make
sudo make install
export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5
cd ..
wget https://savannah.nongnu.org/bugs/download.php?file_id=50021 -O font.ttf
/usr/bin/ftview 150 font.ttf
